<!doctype html>
<html lang="es">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <title>Agregar nuevo libro</title>
  </head>
  <body class="h-100 d-flex bg-light ">
        <div class="container">
            <div class="col-sm text-center">
                <h2>Agregar libro</h2>
            </div>
            <form action="/src/index.php" method="POST">
                <div class="row mt-3 col-3">
                    <label for="bookName" class="form-label">Nombre</label>
                    <input type="text" class="form-control" name="bookName" id="bookName" >
                </div>
                <div class="row mt-3 col-3">
                    <label for="bookAuthor" class="form-label">Autor</label>
                    <input type="text" class="form-control" name="bookAuthor" id="bookAuthor" >
                </div>
                <div class="row mt-3 col-3">
                    <label for="bookYear" class="form-label">Año</label>
                    <input type="text" class="form-control" name="bookYear" id="bookYear" >
                </div>
                <div class="row mt-3 col-3">
                    <label for="bookPages" class="form-label">Cantidad Páginas</label>
                    <input type="text" class="form-control" name="bookPages" id="bookPages" >
                </div>
                <div class="row mt-3 col-3">
                    <label for="bookPrice" class="form-label">Precio</label>
                    <input type="text" class="form-control" name="bookPrice" id="bookPrice" >
                </div>
                <div class="row mt-3 col-3 d-grid d-md-flex justify-content-md-end">
                    <button type="button" class="w-50 btn-sm btn-info btn" onclick="addChapter()" >Agregar Capitulo</button>
                </div>
                <div id="lol" >
                </div>
                <div id="buttonlol" >
                </div>
                <hr class="my-4">
                <button class="w-25 btn btn-primary btn-lg" type="submit">Guardar</button>
                <input type="hidden" name="isCreateBook" id="isCreateBook" value="true" />
            </form>
        </div>
        <script type="text/javascript">
        var index = 1;
        var showRemoveButton = false;
            function addChapter(){
                var chaptersParent = document.getElementById('lol');
                var div = document.createElement('div');
                div.setAttribute('class', 'row mt-3 col-3 chapters');
                var inpt = document.createElement('input');
                inpt.setAttribute('class', 'form-control');
                inpt.setAttribute('type', 'text');
                inpt.setAttribute('name', 'chapter' + index);
                inpt.setAttribute('id', 'chapter' + index++);
                div.appendChild(inpt);
                chaptersParent.appendChild(div);
                if (!showRemoveButton) {
                    addRemoveButton();
                }
            }

            function addRemoveButton(){
                var buttonParent = document.getElementById('buttonlol');
                var div = document.createElement('div');
                div.setAttribute('class', 'row mt-3 col-3 d-grid d-md-flex justify-content-md-end');
                div.setAttribute('id', 'buttoncont');
                var elemento = document.createElement('button');
                elemento.setAttribute('class', 'w-25 btn-sm btn-danger btn');
                elemento.setAttribute('type', 'button');
                elemento.appendChild(document.createTextNode("Quitar"));
                elemento.onclick = removeChapter;
                buttonParent.appendChild(div);
                div.appendChild(elemento);
                showRemoveButton = true;
            }

            function removeChapter(){
                var chapters = document.getElementsByClassName('chapters');
                var size = chapters.length;
                if (size > 0) {
                    chapters[size - 1].remove();
                }
                if (size < 2){
                    document.getElementById('buttoncont').remove();
                    showRemoveButton = false;
                }
            }
        </script>
  </body>
</html>
